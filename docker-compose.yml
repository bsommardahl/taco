version: '2.1'

services:
  taco:
    build: .
    ports:
     - 8080:8080
    environment:
      - AWS_ACCESS_KEY_ID=999999
      - AWS_SECRET_KEY=999999
      - AWS_REGION=us-west-2
      - DYNAMO_DB_ENDPOINT=localstack:4569
      - KINESIS_ENDPOINT=localstack:4568
      - S3_ENDPOINT=localstack:4572
  localstack:
    image: localstack/localstack:latest
    ports:
      - 4567-4583:4567-4583
    environment:
      - SERVICES=dynamodb,kinesis,s3
      - DEBUG=1
      - DATA_DIR=/tmp/localstack/data
    volumes:
      - /tmp/localstack:/tmp/localstack
      - /var/run/docker.sock:/var/run/docker.sock
